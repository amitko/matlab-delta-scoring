\documentclass[12pt]{article}
\usepackage[utf8]{inputenc}
%\usepackage[bulgarian]{babel}
\usepackage[pdftex]{graphicx}
\usepackage{matlab-prettifier}

\title{DELTA SCORING FUNCTION REFERENCE}
%\subtitle{version 0.1}
\author{D. Atanasov}

\begin{document}

\maketitle

\section{Introduction}
This document describes the set of functions and the way of their ussage for obtaining the DELTA SCORING approach for test evaluations.

\section{Instalation}
To install the package download it from \\
{\tt https://github.com/amitko/matlab-delta-scoring.git}. 
\\
Place the folder in the MATLAB path and rename it to {\tt +deltaScoring}.

\section{Ussage}
Here is an example of a simple ussage of the package.

Suppose the raw dichotomous item response is placed in variable {\tt itemScore}.

To estimate the expected item difficulties ("deltas") the bootstrapping procedure

\begin{lstlisting}[style=Matlab-bw]
[ItemDelta, estimatedDeltaSE] = ...
	deltaScoring.estimate.itemDeltaBootstrap(itemScore);
\end{lstlisting}

is called. The resulted item deltas and the corresponding standard error of estimate are returned in variables {\tt ItemDelta} and  {\tt estimatedDeltaSE}.

The classical person D-scores are calculated using the response paterns in itemScore and already calculated item deltas.

\begin{lstlisting}[style=Matlab-bw]
personDscores = ...
	deltaScoring.scoring.dScore(ItemDelta,itemScore,opt.Dscore_method);
\end{lstlisting}

Here {\tt opt} is a structure containing the options for the considered delta scoring model. It can be generated by

\begin{lstlisting}[style=Matlab-bw]
opt = deltaScoring.scoring.Options;
\end{lstlisting}

Here and after the default will be the model RFM2. If a RFM3 model is required this can be stated in 

\begin{lstlisting}[style=Matlab-bw]
opt.model = 3;
\end{lstlisting}

and the corresonding options should be passed to the functions.

The item parameters location $b$ and shape $s$ can be obtained by

\begin{lstlisting}[style=Matlab-bw]
[params, CI, ~, Results] = ...
deltaScoring.estimate.logitDeltaFit(itemScore,personDscores,opt);
\end{lstlisting}

where {\tt params} contains the matrix with corresponding parameters for any item in the test $[b,s]$. The first column corresponds to the location paramater  $b$ while the second represents the shape $s$. If the model is RMF3, the guessing parameter is in the third column.

The matrix {\tt CI} contains the 95\% confidence interval of the estimated values. {\tt Results} contains additional fitting parameters (for example MAD is available in {\tt Results.MAD}).

The persons true scores can be calculated by
\begin{lstlisting}[style=Matlab-bw]
personTrueScores = ...
deltaScoring.scoring.trueScore(ItemDelta,ItemParameters,personDscores,opt);
\end{lstlisting}

and the SE 

\begin{lstlisting}[style=Matlab-bw]
personTrueScoresSE = ...
deltaScoring.scoring.trueScoreSE(ItemDelta,ItemParameters,personDscores,opt);
\end{lstlisting}


A latent verssion of the location and shape parameters (together with their SE) can be obtained by 
\begin{lstlisting}[style=Matlab-bw]
[LatentParams,LatentSE] =  deltaScoring.estimate.ML_RFM_params( itemScore, personDscores, opt);
\end{lstlisting}

The corresponding MAD is obtained by
\begin{lstlisting}[style=Matlab-bw]
LatentMAD = deltaScoring.item.MAD(LatentParams, Results.observedLogitDelta ,opt);
\end{lstlisting}

where {\tt Results.observedLogitDelta} is calculated with \\{\tt deltaScoring.estimate.logitDeltaFit} above and contains the proportion of observed correct answers for the values on the D-score scale.

The corresponding latent values of the person D-scores ( and SE) can be obtained by
\begin{lstlisting}[style=Matlab-bw]
[latentScore, ~, latentScoreSE]= ...
deltaScoring.estimate.ML_RFM_scores( itemScore,LatentParams, opt)
\end{lstlisting}

The estimations of latent item parameters and person D-scores can be iterated untill a convergence is reached

\begin{lstlisting}[style=Matlab-bw]
OldLatentParams = zeros(size(LatentParams));
while max(abs(OldLatentParams - LatentParams)) > eps
	OldLatentParams = LatentParams;
	[LatentParams,LatentSE] =  ...
		deltaScoring.estimate.ML_RFM_params( itemScore, personDscores, opt);
	[latentScore, ~, latentScoreSE]= ...
		deltaScoring.estimate.ML_RFM_scores( itemScore,LatentParams, opt)
end
\end{lstlisting}

Equating of different tests can be performed by functions located in {\tt deltaScoring.equating}. Here an example of equating of classical (nonlatent) parameters of the test will be presented. The equating is based of caclulation of two constants $A$ and $B$ which represent the change of scale for the test equating. These constants can be calculated on the base of  item deltas of the target test {\tt  targetDeltas}, item deltas (allready colculated above) and few common items between the two tests (stated in the variable {\tt CommonItems} )

\begin{lstlisting}[style=Matlab-bw]
   [A,B] = deltaScoring.equating.constants(targetDeltas, ItemDelta, CommonItems);
   equatedItemDeltas = deltaScoring.equating.rescale(ItemDelta,A,B);
   equatedDscores = deltaScoring.scoring.dScore(ItemDelta,itemScore,opt.Dscore_method);
\end{lstlisting}


\section{Function reference}

\input{ref.tex}

\end{document}